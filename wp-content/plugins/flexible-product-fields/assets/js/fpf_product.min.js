jQuery(document).ready(function(){function a(){jQuery.each(fpf_fields,function(d,f){if(f.has_price&&f.price_type=="percent"&&f.price!=0){f.price_value=fpf_product_price*f.price/100;var e=accounting.formatMoney(f.price_value,{symbol:fpf_product.currency_format_symbol,decimal:fpf_product.currency_format_decimal_sep,thousand:fpf_product.currency_format_thousand_sep,precision:fpf_product.currency_format_num_decimals,format:fpf_product.currency_format});var c="#"+f.id+"_price";jQuery(c).html("("+e+")")}if(f.has_options){jQuery.each(f.options,function(j,h){if(h.price_type=="percent"){h.price_value=fpf_product_price*h.price/100;var k=accounting.formatMoney(h.price_value,{symbol:fpf_product.currency_format_symbol,decimal:fpf_product.currency_format_decimal_sep,thousand:fpf_product.currency_format_thousand_sep,precision:fpf_product.currency_format_num_decimals,format:fpf_product.currency_format});if(f.type=="select"){var g="#"+f.id+' option[value="'+h.value+'"]';jQuery(g).text(h.label+" ("+k+")")}if(f.type=="radio"){var g="#"+f.id+"_"+h.value+"_price";jQuery(g).text("("+k+")")}}})}})}function b(g){var h=jQuery("input.qty").val(),d=jQuery("#fpf_totals");d.empty();var c=0;var f=false;jQuery.each(fpf_fields,function(k,o){var m=false;var l=0;var j=true;if(typeof fpf_product.fields_rules[o.id]!=="undefined"){if(!fpf_product.fields_rules[o.id].enabled){j=false}}if(j){if(!o.has_options&&o.has_price&&o.price_value!=0){if(o.type=="text"||o.type=="textarea"||o.type=="fpfdate"){var n=jQuery("#"+o.id).val();if(n!=""){l=o.price_value;m=o.price_display}}if(o.type=="checkbox"){if(jQuery("#"+o.id).is(":checked")){l=o.price_value;m=o.price_display}}}if(o.has_options){jQuery.each(o.options,function(q,p){if(o.type=="select"){var r=jQuery("#"+o.id).val();if(r==p.value){l=p.price_value;m=p.price_display}}if(o.type=="radio"){var r=jQuery("input[name="+o.id+"]:checked").val();if(r==p.value){l=p.price_value;m=p.price_display}}})}}if(l!=0){l=l*h;m=accounting.formatMoney(l,{symbol:fpf_product.currency_format_symbol,decimal:fpf_product.currency_format_decimal_sep,thousand:fpf_product.currency_format_thousand_sep,precision:fpf_product.currency_format_num_decimals,format:fpf_product.currency_format});d.append("<dt>"+o.title+":</dt>");d.append("<dd>"+m+"</dd>");c+=l;f=true}});if(f){var e=(h*fpf_product_price)+c;e=accounting.formatMoney(e,{symbol:fpf_product.currency_format_symbol,decimal:fpf_product.currency_format_decimal_sep,thousand:fpf_product.currency_format_thousand_sep,precision:fpf_product.currency_format_num_decimals,format:fpf_product.currency_format});d.append("<dt>"+fpf_product.total+":</dt>");d.append("<dd>"+e+"</dd>")}}if(typeof fpf_fields!="undefined"){b()}jQuery(document).on("change",".fpf-input-field,input.qty",function(){b(this)});jQuery(document).on("keyup",".fpf-input-field,input.qty,.variations select",function(){b(this)});jQuery(document).on("found_variation","form.cart",function(d,c){fpf_product_price=c.display_price;a();b()})});